import{j as e,r as l,R as J}from"./react-ePaza90U.js";import{c as Oe}from"./react-dom-ClCCcWrb.js";import{B as ue}from"./react-router-dom-DLKOTzUC.js";import{F as K,f as Se,a as Ne,b as me,c as ge}from"./@fortawesome-BfRvrLNQ.js";import{u as T,a as m,P as pe}from"./react-redux-Ce23xZ5m.js";import{c as F,a as Re}from"./@reduxjs-CJetLCaM.js";import{u as W,a as Ie,b as B}from"./react-router-DHtK1h3G.js";import{p as he}from"./dompurify-BuFh49mM.js";import{W as Q,s as De}from"./@arvidbt-_UtwSn1N.js";import{c as Le,a as Te,u as ve,b as Ce,g as Z,i as be,d as Ue,s as xe}from"./@firebase-DVeb_vw8.js";import"./firebase-BMfLM1MP.js";import{F as y,B as Pe}from"./react-bootstrap-DcixykKE.js";import{S as Me}from"./react-singleton-hook-C2tOxsmn.js";import"./classnames-C9FZUsQl.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-Dql683DL.js";import"./prop-types-ZMHxiqrO.js";import"./use-sync-external-store-R5Bn9tbY.js";import"./redux-DITMfSWq.js";import"./immer-D6jAg06p.js";import"./reselect-DJRGOWkq.js";import"./redux-thunk-ClJT1hhx.js";import"./idb-BXWtuYvb.js";import"./tslib-BGVaTf34.js";import"./@restart-B8PZbm5N.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();const je="/",fe="/search-word",Be="/menu",ye="/dialog",we="/debug",v={START_APP_ROUTE:je,BASE_ROUTE:fe,MENU_ROUTE:Be,DIALOG_ROUTE:ye,DEBUG_ROUTE:we},_e={menuOption:""},X=F({name:"menuState",initialState:_e,reducers:{setMenuOption:(a,t)=>{a.menuOption=t.payload}}}),{setMenuOption:He}=X.actions,Ge=X.reducer,ke=()=>{const a=W(),t=T();return{onClickNavigateToPath:(i,n)=>{t(He(n)),a(i)}}},w=({id:a,classStyle:t,children:i,path:n,type:s,onClick:r})=>{const{onClickNavigateToPath:O}=ke();return e.jsx(e.Fragment,{children:s==="button"&&r?e.jsx("button",{id:a,type:"button",className:"btn btn-active-color "+t,onTouchEnd:r,children:i}):s==="button"&&!r?e.jsx("button",{id:a,type:"button",className:"btn btn-active-color "+t,onTouchEnd:()=>O(n,a),children:i}):e.jsx("button",{id:a,type:s,className:"btn btn-active-color "+t,children:i})})},ee=({navBrand:a,navBtns:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"navbar-wrapper",children:e.jsx("nav",{className:"navbar navbar-custom navbar-expand-sm",children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"navbar-brand",children:e.jsx("div",{className:"navbar-brand-grid-container",children:a.name?e.jsx(e.Fragment,{children:e.jsx("div",{className:"nameGrid align-items-center",children:e.jsx("div",{className:"name",children:a.name})})}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"onlyIconGrid",children:e.jsx("div",{className:"icon",children:a.icon})})})})}),e.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:e.jsx("div",{className:"navbar-nav ms-auto mb-2 mb-lg-0",children:t.map((i,n)=>e.jsx("div",{className:"nav-btn-item",children:e.jsx(w,{id:i.name,path:i.path,type:"button",children:e.jsx(K,{className:"nav-btn-icon",icon:i.icon})})},n))})})]})})})}),Fe=a=>({__html:he.sanitize(a)}),Qe=({msg:a,icon:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"footer-wrapper",children:e.jsx("div",{className:"footer-custom",children:e.jsx("div",{className:"container-fluid",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-1 icon",children:e.jsx("div",{children:t})}),e.jsx("div",{className:"col-11 text",children:e.jsx("div",{dangerouslySetInnerHTML:Fe(a)})})]})})})})}),Ve="/search-word/assets/avatar-not-speaking-BwFjj1a-.gif",qe="/search-word/assets/avatar-speaking-DQHi02TP.gif",$e="/search-word/assets/load-icon-4INARmNJ.gif",C={avatarNotSpeakingIcon:{imageSrc:Ve,imageAlt:"avatar normal",imageAttribution:"Avatar Not Speaking Icon created by Raquel Arcaz Arias",searchLink:""},avatarSpeakingIcon:{imageSrc:qe,imageAlt:"avatar hablando",imageAttribution:"Avatar Speaking Icon created by Raquel Arcaz Arias",searchLink:""},loadingIcon:{imageSrc:$e,imageAlt:"cargando",imageAttribution:"Avatar Speaking Icon created by Raquel Arcaz Arias",searchLink:""}};var I=(a=>(a.SEND_SPEECH="send-msg",a.START_SPEECH="start-saying-msg",a.END_SPEECH="end-saying-msg",a.NONE="none",a))(I||{}),g=(a=>(a.LOADING="loading",a.OK="ok",a.NOT_OK="not-ok",a))(g||{}),_=(a=>(a.MICROPHONE_OPENED="opened",a.MICROPHONE_CLOSED="closed",a))(_||{});const ae={data:{intentType:"",userRequest:""},voiceAPIStatus:g.LOADING,voiceMicroStatus:_.MICROPHONE_CLOSED,voiceMsgProps:{body:"",status:I.NONE},deviceId:"1",processingUserRequest:!1},te=F({name:"voiceState",initialState:ae,reducers:{setVoiceAPIStatus:(a,t)=>{a.voiceAPIStatus=t.payload},setVoiceMicroStatus:(a,t)=>{a.voiceMicroStatus=t.payload},setVoiceMsgBody:(a,t)=>{a.voiceMsgProps.body=t.payload},setVoiceMsgStatus:(a,t)=>{a.voiceMsgProps.status=t.payload},setDeviceId:(a,t)=>{a.deviceId=t.payload},setProcessingUserRequest:(a,t)=>{a.processingUserRequest=t.payload},setUserSpeechData:(a,t)=>{a.data=t.payload},resetUserSpeechData:a=>{a.data=ae.data}}}),{setVoiceAPIStatus:H,setVoiceMicroStatus:se,setVoiceMsgBody:Ja,setVoiceMsgStatus:P,setDeviceId:Ye,setProcessingUserRequest:ne,setUserSpeechData:ze,resetUserSpeechData:ie}=te.actions,Je=te.reducer,Ke=()=>{const a=m(O=>{var d;return(d=O.voiceState)==null?void 0:d.voiceAPIStatus}),t=T(),{printDebug:i,sendTextToAlexa:n}=l.useContext(M),s=async O=>{const d=r(O);await n(a,d),t(ne(!1))},r=O=>{let d="<voice name='Lucia'>";return d+=O,d+="</voice>",d};return{speechResponseToUserRequest:s}},We=(a,t)=>{const i=Array(a.length+1).fill(null).map(()=>Array(t.length+1).fill(0));for(let s=0;s<=a.length;s++)for(let r=0;r<=t.length;r++)s===0?i[s][r]=r:r===0?i[s][r]=s:a[s-1]===t[r-1]?i[s][r]=i[s-1][r-1]:i[s][r]=1+Math.min(i[s-1][r],i[s][r-1],i[s-1][r-1]);const n=Math.max(a.length,t.length);return 1-i[a.length][t.length]/n},Ze=["ES M\xC1S A\xD1EJO QUE EL VINAGRE","ES M\xC1S BUENO QUE EL PAN","TIEMPO QUE SE VA, NO VUELVE M\xC1S","TODO TIEMPO PASADO, FUE MEJOR","LO QUIERO, PARA AYER","SIEMBRA VIENTOS Y COSECHA TEMPESTADES","AL PA\xCDS QUE FUERES, HAZ LO QUE VIERES","SI LA MONTA\xD1A NO VIENE A MAHOMA, MAHOMA VA A LA MONTA\xD1A","QUIEN TE QUIERE TE APORREA","SI SE RASCA, ES PORQUE LE PICA","QUED\xD3 PARA VESTIR SANTOS","QUEDO MIRANDO PARA EL NORTE","DESVESTIR UN SANTO PARA VESTIR OTRO","QUE LE HACE EL AGUA AL PESCADO","QUE M\xC1S LE HACE UNA RAYA AL TIGRE","DE LO BUENO, POCO","POR LA BOCA MUERE EL PEZ","PREGUNTANDO, SE LLEGA A ROMA","PALOS PORQUE BOGAS Y PALOS PORQUE NO BOGAS","PARA MUESTRA, UN BOTON","LA EXCEPCION CONFIRMA LA REGLA","EL LEON NO ES TAN BRAVO COMO LO PINTAN","NO HAY MAL QUE DURE CIEN A\xD1OS, NI CUERPO QUE LO RESISTA","NO HAGAS LE\xD1A DEL ARBOL CAIDO","EN EL PAIS DE LOS CIEGOS, EL TUERTO ES REY","ROMA NO SE HIZO EN UN D\xCDA","NO HAY PEOR SORDO, QUE EL QUE NO QUIERE OIR","NO HAY PEOR CIEGO, QUE EL QUE NO QUIERE VER","A BUEN ENTENDEDOR, POCAS PALABRAS","A FALTA DE PAN, BUENAS SON LAS TORTAS","NO ME PICOTEE LAS UVAS","ALGO ES ALGO, PEOR ES NADA","A OTRO PERRO CON ESE HUESO","COMO TRAJE A LA MEDIDA","CUANDO UN BURRO REBUZNA, LOS DEMAS SE CALLAN","DONDE MANDA CAPITAN, NO MANDA MARINERO","EN BOCA CERRADA NO ENTRAN MOSCAS","CUANDO EL RIO SUENA, ES PORQUE PIEDRAS TRAE","CUANDO MENOS SE PIENSA, SALTA LA LIEBRE","AL QUE DA Y QUITA, LE SALE UNA CORCOBITA","EL QUE TERMINA PRIMERO, LE AYUDA A SU COMPA\xD1ERO","EL PEZ M\xC1S GRANDE, SE COME AL M\xC1S CHICO","LA NECESIDAD TIENE CARA DE HEREJE","LAS COSAS CLARAS Y EL CHOCOLATE ESPESO","AMOR CON AMOR SE PAGA","EL QUE LA HACE LA PAGA","DE TAL PALO, TAL ASTILLA","JUNTOS, PERO NO REVUELTOS","LE DAN LA MANO Y SE TOMA EL PIE","A RIO REVUELTO, GANANCIA DE PESCADORES","BARRIGUITA LLENA, CORAZON CONTENTO","CUENTAS CLARAS, CONSERVAN LA AMISTAD","DE NOCHE TODOS LOS GATOS SON NEGROS","DEL DICHO AL HECHO, HAY MUCHO TRECHO","MAS VALE DAR QUE RECIBIR","AL OJO DEL AMO, ENGORDA EL CABALLO","EL QUE BUSCA ENCUENTRA","EN LO AJENO, REINA LA DESGRACIA","EL QUE NO ARRIESGA, NO PASA EL RIO","HOMBRE PREVENIDO, VALE POR DOS","EN MENOS QUE CANTE UN GALLO","JUAN PALOMO, YO ME LO TRAIGO, YO ME LO COMO","EN CUESTION DE GUSTOS, NO HAY NADA ESCRITO","FUE POR LANA Y SALIO TRASQUILADO","AVISADO, DISCULPADO","HABLANDO, SE ENTIENDE LA GENTE","DONDE COMEN DOS, COMEN TRES","DONDE FUEGO HUBO, CENIZAS QUEDAN","EN TODAS PARTES SE CUECEN HABAS","HOY POR TI, MA\xD1ANA POR M\xCD","LE OFRECIO EL ORO Y EL MORO","NADA CONTRA LA CORRIENTE","POBRE, PERO HONRADO","PIANO, PIANO, VA LONTANO","SONO COMO ARPA VIEJA","CALIENTE, CALIENTE, COMO EL AGUA ARDIENTE","FRIO, FRIO, COMO EL AGUA DEL RIO","NO ES NI CHICHA, NO LIMONADA","TIENE QUE PEDIRLE PERMISO A UN PIE PARA MOVER EL OTRO","NO HAY PEOR ASTILLA QUE LA DEL MISMO PALO","NADIE SABE PARA QUIEN TRABAJA","MAS VALE UN DIABLO CONOCIDO, QUE OTRO POR CONOCER","EL QUE ARRANCA, ESCAPA","LO MEJOR ES, CORTAR POR LO SANO","NO TIENE MADRE, NI PADRE, NI PERRO QUE LE LADRE","MUERTO EL PERRO, SE ACABO LA RABIA","EST\xC1, MAS LOCO QUE UNA CABRA","TIENE MAS CUENTAS QUE UN ROSARIO","SE SACAN LOS TRAPITOS AL SOL","LAS APARIENCIAS ENGA\xD1AN","LE DIERON SU MERECIDO","LA OPORTUNIDAD LA PINTAN CALVA","LA PROCESI\xD3N SE LLEVA POR DENTRO","LA CODICIA ROMPE EL SACO","LA CURIOSIDAD MATA AL GATO","SE FUE POR LAS RAMAS","EL QUE LA SIGUE LA CONSIGUE","CADA UNO CON SU CADA UNO","TIENE GUSTO A POCO","CUANDO LLUEVE, TODOS SE MOJAN"],re=a=>a.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").replace(/\./g,"").toLowerCase(),Xe=["c\xE1lido","qu\xEDmica","coraz\xF3n","cultura","garaje","guiso","guion","jazm\xEDn","jersey","jirafa","jornada","jugador","acuerdo","conquista","casa","quemar","coco","cuello","gato","guerrero","ping\xFCino","golpear","guitarra","jard\xEDn","juego","fijaci\xF3n","joya","juguete","carro","agua"],oe=()=>{const a=m(i=>i.speechDBState.speechData.docRef),{getFirebaseDb:t}=l.useContext(le);return l.useContext(M),{createSpeechInFirebaseDB:async i=>{let n=null;try{const s=await t();if(s){const r=Le(s,"users");n=await Te(r,i)}else throw new Error("Failed adding new user to Firebase collection. DETAILS: Could not get database instance.")}catch(s){throw new Error(`Failed adding new user to Firebase collection. DETAILS: ${s}`)}return n||null},addSpeechToFirebaseDB:async i=>{try{if(await t()&&a)await ve(a,{speechs:Ce(i)});else throw new Error("Failed adding user answers to initial questionnaire to Firebase collection. DETAILS: Could not get database instance.")}catch(n){throw new Error(`Failed adding user answers to initial questionnaire to Firebase collection. DETAILS: ${n}`)}}}},ea=()=>{const a=`<voice name='Lucia'><amazon:emotion name="excited" intensity="high"> 
                       D\xEDme una palabra </amazon:emotion><break strength='strong'/></voice>`,t=`<voice name='Lucia'><amazon:emotion name="excited" intensity="high"> 
                          D\xEDme un refr\xE1n </amazon:emotion><break strength='strong'/></voice>`,[i,n]=l.useState(!1),[s,r]=l.useState(!1),[O,d]=l.useState(!0),[A,S]=l.useState(),[G,b]=l.useState("Esperando consulta..."),p=m(E=>{var c;return(c=E.voiceState)==null?void 0:c.voiceAPIStatus}),D=m(E=>{var c;return(c=E.voiceState)==null?void 0:c.voiceMsgProps}),k=m(E=>{var c;return(c=E.voiceState)==null?void 0:c.processingUserRequest}),U=m(E=>{var c,u;return(u=(c=E.voiceState)==null?void 0:c.data)==null?void 0:u.intentType}),j=m(E=>{var c,u;return(u=(c=E.voiceState)==null?void 0:c.data)==null?void 0:u.userRequest}),o=m(E=>E.menuState.menuOption),R=T(),{speechResponseToUserRequest:x}=Ke(),{addSpeechToFirebaseDB:V}=oe(),{printDebug:N}=l.useContext(M),q=l.useCallback(()=>{switch(o){case"normal-words":S(new Q(De)),x(a);break;case"phonetic-words":S(new Q(Xe)),x(a);break;case"proverbs":S(new Q(Ze)),x(t);break}},[p]),$=l.useCallback(()=>{N(`+++ INSIDE loading() - voiceAPIStatus => ${p}`),N(`+++ INSIDE loading() - voiceMsgStatus => ${D.status}`),p===g.LOADING||k?n(!0):n(!1)},[p,D]),Y=l.useCallback(()=>{D.status===I.START_SPEECH?r(!0):r(!1)},[D]),z=l.useCallback(async()=>{N("+++ INSIDE handleVoiceAPIIntents() +++ "),N(`+++ VOICE API STATUS => ${p} `),N(`+++ INTENT TYPE => ${U} `),U==="word-intent"&&await Ee(j),R(ie())},[U,p]),Ee=async E=>{let c="";d(!0),b("Consulta recibida. Buscando..."),setTimeout(async()=>{c=await de(j),N(`Inside handleNewWord - wordFound 1 => ${c}`),c?(b(`Recibida: ${E} - Encontrada: ${c}`),await V({userSpeech:E,algorithmAnswer:c}).then(()=>{N("Consulta agrgada correctamente")}).catch(u=>{N(`Error al agregar la consulta: ${u}`)}),x(`La consulta que he entendido es ${E}, y el resultado que he encontrado en el diccionario es ${c}
        <break strength='strong'/> D\xEDme otra consulta.`)):(b(`Recibida: ${E} - Encontrada: sin resultados`),await V({userSpeech:E,algorithmAnswer:"sin resultados"}).then(()=>{N("Consulta agrgada correctamente")}).catch(u=>{N(`Error al agregar la consulta: ${u}`)}),x("Lo siento, la consulta que me has dicho no existe. Por favor, vuelva a repetirla o utilice una distinta.")),d(!1)},2e3)},de=async E=>{let c="";if(A){let u=[];A.getDictionaryWords().map(L=>{const f=We(re(L),re(E));f>=.8&&(u.push({result:L,lvn:f}),console.log(`LVN DISTANCE between ${L} and ${E} is ${f}`),N(`LVN DISTANCE between ${L} and ${E} is ${f}`))}),c=Ae(u)}return c},Ae=E=>{if(E.length>0){const c=E.slice().sort((u,L)=>L.lvn-u.lvn);return console.log("+++ Inside getWordWithMaxLvn - listNoOrdered  => "+JSON.stringify(E)),console.log("+++ Inside getWordWithMaxLvn - listOrdered => "+JSON.stringify(c)),c[0].result}return""};return l.useEffect(()=>{q()},[q]),l.useEffect(()=>{$()},[$]),l.useEffect(()=>{Y()},[Y]),l.useEffect(()=>{z()},[z]),{searchingText:G,isLoading:i,isSpeechOn:s,isSearching:O}},aa=()=>{const{searchingText:a,isLoading:t,isSpeechOn:i,isSearching:n}=ea();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"container-menu",children:e.jsxs("div",{className:"grid-container",children:[i?e.jsx("div",{className:"grid-item item-avatar",children:e.jsx("img",{src:C.avatarSpeakingIcon.imageSrc,alt:C.avatarSpeakingIcon.imageAlt,className:"d-inline-block align-center"})}):e.jsx("div",{className:"grid-item item-avatar",children:e.jsx("img",{src:C.avatarNotSpeakingIcon.imageSrc,alt:C.avatarNotSpeakingIcon.imageAlt,className:"d-inline-block align-center"})}),e.jsx("div",{className:"grid-item item-input-wrapper-menu-view",children:t?e.jsx("div",{className:"grid-item item-icon-load-alexa-loading-view",children:e.jsx("img",{src:C.loadingIcon.imageSrc,alt:C.loadingIcon.imageAlt,className:"d-inline-block align-center"})}):n?e.jsx("div",{className:"grid-item item-waiting-text-alexa-loading-view item-waiting-text-alexa-loading-view-animation",children:a}):e.jsx("div",{className:"grid-item item-waiting-text-alexa-loading-view",children:a})})]})})})})},ta=()=>{const a={navBrand:{name:"Buscar similitud"},navBtns:[{name:"back-btn",icon:Se,path:"/"},{name:"debug-btn",icon:Ne,path:"/debug"}],disableNavButton:!1},t={icon:e.jsx(K,{icon:me,size:"lg"}),msg:"Ejemplo: Alexa, manzana"};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{navBrand:a.navBrand,navBtns:a.navBtns,disableNavButton:a.disableNavButton}),e.jsx(aa,{}),e.jsx(Qe,{msg:t.msg,icon:t.icon})]})},sa=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"container-menu-start-app-view",children:e.jsxs("div",{className:"grid-container-start-app-view",children:[e.jsx("div",{className:"item-logo-start-app-view",children:"Buscar similitud"}),e.jsxs("div",{className:"item-button-start-app-view",children:[e.jsx(w,{id:"normal-words",path:"/dialog",classStyle:"btn-primary item-button",type:"button",children:"Palabras Normales"})," ",e.jsx(w,{id:"phonetic-words",path:"/dialog",classStyle:"btn-primary item-button",type:"button",children:"Palabras F\xF3netica"}),e.jsx(w,{id:"proverbs",path:"/dialog",classStyle:"btn-primary item-button",type:"button",children:"Refranes"})]})]})})})}),na=({msg:a})=>{const t={navBrand:{name:"En Modo Debug"},navBtns:[{name:"exit-btn",icon:ge,path:"/dialog"}],disableNavButton:!1};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{navBrand:t.navBrand,navBtns:t.navBtns,disableNavButton:t.disableNavButton}),e.jsx("div",{className:"debug-container",children:e.jsxs("div",{className:"debug-container-grid",children:[e.jsx("div",{className:"debug-container-grid-item-traza",children:e.jsx("ul",{children:a.map((i,n)=>i&&e.jsx("li",{children:i},n))})}),e.jsx("div",{className:"debug-container-grid-item-input-btns",children:e.jsx("div",{className:"debug-container-grid-item-input-field",children:e.jsxs("div",{className:"input-group mb-3",children:[e.jsx("div",{className:"input-group-prepend",children:e.jsx("span",{className:"input-group-text",id:"inputGroup-sizing-default",children:"UID"})}),e.jsx("input",{type:"number",name:"uid",placeholder:"UID del usuario que ha realizado test usabilidad",pattern:"^[0-9]+$",title:"Solo se permiten n\xFAmeros",className:"form-control","aria-label":"Default","aria-describedby":"inputGroup-sizing-default",required:!0})]})})})]})})]})},ia=()=>{const[a,t]=l.useState(null),[i,n]=l.useState([]),s=T(),r=l.useCallback(async()=>{A("Beginning Alexa.create"),window.Alexa?window.Alexa.create({version:"1.0"}).then(o=>{o.alexa?(t(o.alexa),o.alexa.skill.onMessage(b),o.alexa.speech.onStarted(p),o.alexa.speech.onStopped(D),o.alexa.voice.onMicrophoneOpened(k),o.alexa.voice.onMicrophoneClosed(U),A("Alexa is ready - newest version 5 :) Received initial data 45"),o.message.deviceId&&(A("Alexa Skill init data: "+o.message.deviceId),console.log("Alexa Skill init data: "+o.message.deviceId),s(Ye(o.message.deviceId))),s(H(g.OK))):(A(`Alexa failed to initialize, code: ${o.code}`),s(H(g.NOT_OK)))}).catch(o=>{A(`Alexa not ready :(. Error: ${o}`),s(H(g.NOT_OK))}):s(H(g.NOT_OK))},[]),O=o=>{n(R=>[...R,o]),console.log(o)},d=()=>{n([])},A=o=>{O(typeof o!="string"?JSON.stringify(o,null,2):o)},S=o=>{o.statusCode==200?A("message was sent to backend successfully"):(s(P(I.END_SPEECH)),A("failed to send message to skill backend:"))},G=l.useCallback(async o=>{try{A("sending message to skill endpoint ==> "+JSON.stringify(o)),A("+++ INSIDE sendMessage - alexaClient ==> "+a),await a.skill.sendMessage(o,S)}catch(R){s(P(I.END_SPEECH)),A("Alexa error ==> "+R)}},[a]),b=o=>{let R;A("Web APP received a message from the skill endpoint"),A(o),o&&(R={intentType:o.intentType,userRequest:o.userRequest},s(ne(!0)),s(ze(R)))},p=()=>{s(P(I.START_SPEECH))},D=()=>{s(P(I.END_SPEECH))},k=()=>{s(se(_.MICROPHONE_OPENED))},U=()=>{s(se(_.MICROPHONE_CLOSED))},j=l.useCallback(()=>{s(ie())},[]);return l.useEffect(()=>{r()},[]),{debugMessages:i,printDebug:A,sendMessage:G,resetVoiceIntent:j,resetDebugMessages:d}},ra=()=>{const a=T(),{debugMessages:t,printDebug:i,sendMessage:n,resetDebugMessages:s}=ia();return{debugMessages:t,printDebug:i,sendLogToAlexa:async(r,O)=>{r===g.OK&&await n({intentRequest:"log-text-intent",logTxt:O})},sendTextToAlexa:async(r,O,d)=>{r===g.OK&&(a(P(I.SEND_SPEECH)),await n({intentRequest:d||"text-to-speech-intent",speech:O}))},resetDebugMessages:s}},oa="AIzaSyClHLApMEpY_mkWaB-1hPRk2Cgicfjsnrc",ca="searchword-38b23.firebaseapp.com",la="searchword-38b23",Ea="searchword-38b23.appspot.com",da="578864658516",Aa="1:578864658516:web:0a2acaab6a2cbd65ac95c1",Oa="G-B4Q9N7DFM0",h={DB_API_KEY:oa,DB_AUTH_DOMAIN:ca,DB_PROJECT_ID:la,DB_STORAGE_BUCKET:Ea,DB_MESSAGING_SENDER_ID:da,DB_APP_ID:Aa,DB_MEASUREMENT_ID:Oa},ua=()=>{const[a,t]=l.useState(null),i=()=>{const s={apiKey:h.DB_API_KEY,authDomain:h.DB_AUTH_DOMAIN,projectId:h.DB_PROJECT_ID,storageBucket:h.DB_STORAGE_BUCKET,messagingSenderId:h.DB_MESSAGING_SENDER_ID,appId:h.DB_APP_ID,measurementId:h.DB_MEASUREMENT_ID},r=be(s);return r?(t(r),r):null},n=async()=>{const s=Ue();try{return!await xe(s)}catch(r){throw new Error(`Anonymously sign in failed. DETAILS: ${r}.`)}};return{getFirebaseDb:async()=>{let s=null;if(a)s=Z(a);else{const r=i();r&&(await n()||(s=Z(r)))}return s}}},Sa={speechData:{docRef:null,userId:"",speechs:[]}},ce=F({name:"speechDBState",initialState:Sa,reducers:{setUserDocRef:(a,t)=>{a.speechData.docRef=t.payload},setUserId:(a,t)=>{a.speechData.userId=t.payload},addSpeech:(a,t)=>{a.speechData.speechs.push(t.payload)}}}),{setUserDocRef:Na,setUserId:ma,addSpeech:Ka}=ce.actions,ga=ce.reducer,pa=()=>{const[a,t]=l.useState({userId:""}),i=m(d=>d.speechDBState.speechData),n=T(),s=W(),{createSpeechInFirebaseDB:r}=oe(),{printDebug:O}=l.useContext(M);return{formData:a,handleUserIdChange:d=>{const A=d.target.value;t({...a,userId:A})},onSubmitHandler:async d=>{d.preventDefault();let A={...i};A.userId=a.userId,n(ma(a.userId)),O(`Usuario con nombre: ${a.userId}`),await r(A).then(S=>{O(`Usuario agregado con docRefId: ${S==null?void 0:S.id}`),n(Na(S)),s(v.MENU_ROUTE)}).catch(S=>{O(`Error al agregar el nuevo usuario: ${S}`)})}}},Ra=()=>{const{formData:a,handleUserIdChange:t,onSubmitHandler:i}=pa();return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"container-menu-start-app-view",children:e.jsxs("div",{className:"grid-container-start-app-view",children:[e.jsx("div",{className:"item-logo-start-app-view",children:"Buscar similitud"}),e.jsxs(y,{onSubmit:i,children:[e.jsxs(y.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(y.Label,{children:"Identificador Usuario"}),e.jsx(y.Control,{type:"string",placeholder:"Introduzca un identificador v\xE1lido del usuario",value:a.userId,onChange:t})]}),e.jsx(Pe,{variant:"primary",type:"submit",children:"Acceder"})]})]})})})})},le=J.createContext({}),M=J.createContext({});function Ia(){const{getFirebaseDb:a}=ua(),{debugMessages:t,printDebug:i,sendLogToAlexa:n,sendTextToAlexa:s,resetDebugMessages:r}=ra();return e.jsx(e.Fragment,{children:e.jsx(le.Provider,{value:{getFirebaseDb:a},children:e.jsx(M.Provider,{value:{debugMessages:t,printDebug:i,sendLogToAlexa:n,sendTextToAlexa:s,resetDebugMessages:r},children:e.jsx(ue,{basename:v.BASE_ROUTE,children:e.jsxs(Ie,{children:[e.jsx(B,{path:v.START_APP_ROUTE,element:e.jsx(Ra,{})}),e.jsx(B,{path:v.MENU_ROUTE,element:e.jsx(sa,{})}),e.jsx(B,{path:v.DIALOG_ROUTE,element:e.jsx(ta,{})}),e.jsx(B,{path:v.DEBUG_ROUTE,element:e.jsx(na,{msg:t})})]})})})})})}const ha={serializableCheck:{ignoredActions:["speechDBState/setUserDocRef"],ignoredPaths:["speechDBState.speechData.docRef"]}},Da=Re({reducer:{voiceState:Je,menuState:Ge,speechDBState:ga},middleware:a=>a(ha)});Oe.createRoot(document.getElementById("root")).render(e.jsx(pe,{store:Da,children:e.jsxs(e.Fragment,{children:[e.jsx(Me,{}),e.jsx(Ia,{})]})}));
